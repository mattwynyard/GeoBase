[
 {
  "file": "/Users/Matt/XCode/GeoBase/GeoBase/ProjectDetailController.swift",
  "offset": 991,
  "remove": 2729,
  "text": "(update) //DEBUG\n        \n        if !update {\n            let date = NSDate()\n            let formatter = NSDateFormatter()\n            formatter.dateFormat = \"dd-MM-yyyy\"\n            dateLabel.text = formatter.stringFromDate(date)\n            saveButton.setTitle(\"Create\", forState: UIControlState.Normal)\n            exportButton.enabled = false\n        } else {\n            dateLabel.text = date_created\n            saveButton.setTitle(\"Update\", forState: UIControlState.Normal)\n            exportButton.enabled = true\n            \n        }\n    }\n    \n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n        // Dispose of any resources that can be recreated.\n    }\n    \n    func textFieldShouldReturn(textField: UITextField) -> Bool { // called when 'return' key pressed. return NO to ignore.\n        \n        textField.resignFirstResponder()\n        return true;\n    }\n    \n    override func touchesBegan(touches: Set<UITouch>, withEvent event: UIEvent?) {\n        \n        self.view.endEditing(true)\n    }\n    \n    @IBAction func saveButton(sender: AnyObject) {\n        \n        let appDel: AppDelegate = (UIApplication.sharedApplication().delegate as! AppDelegate)\n        let context: NSManagedObjectContext = appDel.managedObjectContext!\n        let entity = NSEntityDescription.entityForName(\"Project\", inManagedObjectContext: context)\n        let message: String = \"Create new project? \" + \"\\(projectLabel.text!)\"\n        let alertController = UIAlertController(title: \"Save to Database\", message: message, preferredStyle: .Alert)\n        \n        if existingItem != nil {\n            existingItem?.setValue(projectLabel.text, forKey: \"project\")\n            existingItem?.setValue(notesTextView.text, forKey: \"notes\")\n            do {\n                try context.save()\n            } catch _ {\n            }\n            self.navigationController?.popViewControllerAnimated(true)\n            \n        } else {\n            \n            let cancelAction = UIAlertAction(title: \"Cancel\", style: .Cancel) { (action) in\n                \n                //self.navigationController?.popViewControllerAnimated(true)\n            }\n            alertController.addAction(cancelAction)\n            \n            let OKAction = UIAlertAction(title: \"Save\", style: .Default) { (action) in\n                let newRecord = Project(entity: entity!, insertIntoManagedObjectContext: context)\n                newRecord.notes = self.notesTextView.text!\n                newRecord.project = self.projectLabel.text\n                newRecord.date_created = self.dateLabel.text!\n                //println(self.notesTextView.text) //DEBUG\n                \n                self.navigationController?.popViewControllerAnimated(true)\n\n                do {\n                    try context.save()\n                } catch _ {\n                }",
 }
]
